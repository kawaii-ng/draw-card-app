(this["webpackJsonpdraw-card-app"]=this["webpackJsonpdraw-card-app"]||[]).push([[0],{62:function(e,t,c){},63:function(e,t,c){},79:function(e,t,c){},80:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),s=c(34),r=c.n(s),j=(c(62),c.p,c(63),c(57)),i=(c(68),j.a.initializeApp({apiKey:"AIzaSyCET7EfYB-j-ueF6ha8Y8_1yzMf1AymEnE",authDomain:"draw-card-project.firebaseapp.com",projectId:"draw-card-project",storageBucket:"draw-card-project.appspot.com",messagingSenderId:"305803372926",appId:"1:305803372926:web:6dcb37eabfbfd16f1feb2f"})),d=(c(69),c(12)),l=c(14),o=c(19),b=c(82),h=c(89),x=c(86),O=c(88),u=c(51),m=c(53),p=c(52),f=c(83),g=c(3);function y(){var e=Object(a.useState)(),t=Object(d.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(),r=Object(d.a)(s,2),j=(r[0],r[1]),y=Object(a.useState)(),w=Object(d.a)(y,2),N=w[0],v=w[1],S=Object(a.useState)(),C=Object(d.a)(S,2),E=C[0],A=C[1],T=Object(l.g)();return Object(a.useEffect)((function(){i.auth().onAuthStateChanged((function(e){e?(A(""),v(""),j(e),T.push("/Dashboard")):j("")}))}),[]),Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(b.a,{children:Object(g.jsx)("div",{className:"w-100 d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(g.jsx)(h.a,{className:"h-100 rounded-3",style:{width:"400px",boxShadow:"0px 25px 20px #777"},children:Object(g.jsxs)(h.a.Body,{className:"my-4 px-5",children:[Object(g.jsxs)(x.a,{children:[Object(g.jsx)("h1",{className:"text-center",children:"Login"}),c&&Object(g.jsx)(O.a,{variant:"danger",className:"mt-4",children:c}),Object(g.jsxs)(u.a,{className:"mt-4",children:[Object(g.jsx)(m.a,{children:"Email Address"}),Object(g.jsx)(p.a,{type:"email",onChange:function(e){A(e.target.value)},required:!0})]}),Object(g.jsxs)(u.a,{children:[Object(g.jsx)(m.a,{children:"Password"}),Object(g.jsx)(p.a,{type:"password",onChange:function(e){v(e.target.value)},required:!0}),Object(g.jsx)("p",{children:Object(g.jsx)(o.b,{to:"/forgot-password",children:"Forgot password?"})})]}),Object(g.jsx)(f.a,{className:"w-100 mt-1 rounded-3",type:"submit",onClick:function(){n(""),i.auth().signInWithEmailAndPassword(E,N).catch((function(e){n("Failed to login an account ")}))},children:"Login"})]}),Object(g.jsxs)("p",{className:"text-center mt-3",children:["Do not have an account? ",Object(g.jsx)(o.b,{to:"/signup",children:"Sign up"})]})]})})})})})}function w(){var e=Object(a.useState)(),t=Object(d.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(),r=Object(d.a)(s,2),j=(r[0],r[1]),y=Object(a.useState)(),w=Object(d.a)(y,2),N=w[0],v=w[1],S=Object(a.useState)(),C=Object(d.a)(S,2),E=C[0],A=C[1],T=Object(a.useState)(),k=Object(d.a)(T,2),F=k[0],B=k[1],P=Object(l.g)();return Object(a.useEffect)((function(){i.auth().onAuthStateChanged((function(e){e?(B(""),v(""),j(e),P.push("/Dashboard")):j("")}))}),[]),Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(b.a,{children:Object(g.jsx)("div",{className:"w-100 d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(g.jsx)(h.a,{className:"h-100 rounded-3",style:{width:"400px",boxShadow:"0px 25px 20px #777"},children:Object(g.jsxs)(h.a.Body,{className:"my-4 px-5",children:[Object(g.jsxs)(x.a,{children:[Object(g.jsx)("h1",{className:"text-center",children:"Sign Up"}),c&&Object(g.jsx)(O.a,{variant:"danger",className:"mt-4",children:c}),Object(g.jsxs)(u.a,{className:"mt-4",children:[Object(g.jsxs)(m.a,{children:["Email Address ",Object(g.jsx)("font",{color:"red",children:"*"})]}),Object(g.jsx)(p.a,{type:"email",onChange:function(e){B(e.target.value)},required:!0})]}),Object(g.jsxs)(u.a,{children:[Object(g.jsxs)(m.a,{children:["Password ",Object(g.jsx)("font",{color:"red",children:"*"})]}),Object(g.jsx)(p.a,{type:"password",onChange:function(e){v(e.target.value)},required:!0})]}),Object(g.jsxs)(u.a,{children:[Object(g.jsxs)(m.a,{children:["Confrim Password ",Object(g.jsx)("font",{color:"red",children:"*"})]}),Object(g.jsx)(p.a,{type:"password",onChange:function(e){A(e.target.value)},required:!0})]}),Object(g.jsx)(f.a,{className:"w-100 mt-1 rounded-3",type:"submit",onClick:function(){if(E!==N)return n("Password do not match ");n(""),i.auth().createUserWithEmailAndPassword(F,N).catch((function(e){n("Failed to ceate an account ")}))},children:"Sign Up"})]}),Object(g.jsxs)("p",{className:"text-center mt-3",children:["Already have an account? ",Object(g.jsx)(o.b,{to:"/login",children:"Login"})]})]})})})})})}var N=c(87),v=c(85);function S(){var e=Object(l.g)();return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(N.a,{className:"d-flex align-items-center",style:{background:"#333652"},collapseOnSelect:!0,expand:"lg",children:[Object(g.jsxs)(N.a.Brand,{className:"py-3",style:{float:"left",color:"white",paddingLeft:"15%"},children:["Welcome to ",Object(g.jsx)("strong",{children:"Draw Card APP"})]}),Object(g.jsx)(N.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(g.jsxs)(N.a.Collapse,{id:"responsive-navbar-nav",children:[Object(g.jsx)(v.a,{className:"mr-auto"}),Object(g.jsxs)(v.a,{style:{paddingRight:"15%"},children:[Object(g.jsx)(v.a.Link,{as:o.b,to:"/record",className:"py-3",style:{color:"white"},children:"Check My Record"}),Object(g.jsx)(v.a.Link,{children:Object(g.jsx)(f.a,{type:"submit",onClick:function(){i.auth().signOut(),e.push("/login")},children:"Logout"})})]})]})]})})}c(79);function C(){var e=i.auth().currentUser,t=Object(a.useState)(!1),c=Object(d.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)(!1),j=Object(d.a)(r,2),l=j[0],o=j[1],x=Object(a.useState)(),O=Object(d.a)(x,2),u=O[0],m=O[1],p=Object(a.useState)(),y=Object(d.a)(p,2),w=y[0],N=y[1],v=function(t){m(""),N("");var c=Math.floor(12*Math.random()+1);i.firestore().collection("CARD").where("ID","==",c).onSnapshot((function(t){t.docs.forEach((function(t){m(t.data().ID),N(t.data().CONTENT),i.firestore().collection("USER").add({EMAIL:String(e.email),NUM:Number(t.data().ID),TEXT:String(t.data().CONTENT)})}))})),o(!0)};return Object(a.useEffect)((function(){l&&o(!1)})),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(S,{}),Object(g.jsx)(b.a,{children:Object(g.jsxs)("div",{className:"w-100 d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:[!n&&Object(g.jsx)(f.a,{onClick:function(){s(!0),v()},children:"Draw Your Card"}),n&&Object(g.jsx)(b.a,{className:"d-flex align-items-center justify-content-center",children:Object(g.jsx)(h.a,{className:"h-100 rounded-3",style:{width:"400px",boxShadow:"0px 15px 25px #AAA"},children:Object(g.jsxs)(h.a.Body,{className:"my-4 px-5",children:[Object(g.jsxs)(h.a.Title,{children:["Card No. ",u]}),Object(g.jsx)(h.a.Text,{children:"\u5929\u7236\u7684\u4fe1\uff1a"}),Object(g.jsx)(h.a.Text,{children:w}),Object(g.jsx)(f.a,{className:"mt-5",onClick:v,children:"Draw Again"})]})})})]})})]})}var E=c(84),A=c(54);function T(){var e=i.auth().currentUser.email,t=Object(a.useState)([]),c=Object(d.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)(),j=Object(d.a)(r,2),l=(j[0],j[1],Object(a.useState)()),x=Object(d.a)(l,2);x[0],x[1];return Object(a.useEffect)((function(){i.firestore().collection("USER").where("EMAIL","==",String(e)).onSnapshot((function(e){var t=e.docs.map((function(e){return{t:e.data().TEXT,n:e.data().NUM}}));s(t)}))}),[]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(S,{}),Object(g.jsx)(b.a,{className:"w-100 mt-5 d-flex align-items-center justify-content-center",style:{},children:Object(g.jsx)(E.a,{children:Object(g.jsx)(o.b,{to:"/dashboard",children:Object(g.jsx)(f.a,{children:"Back"})})})}),Object(g.jsx)(b.a,{className:"w-100 mt-5 mb-5 d-flex align-items-center justify-content-center",style:{},children:Object(g.jsx)(E.a,{children:Object(g.jsxs)("div",{children:[Object(g.jsx)(h.a,{className:"mx-5 my-1",children:Object(g.jsx)(h.a.Body,{children:Object(g.jsxs)(E.a,{children:[Object(g.jsx)(A.a,{style:{maxWidth:"10%"},children:Object(g.jsx)(h.a.Title,{children:"Card"})}),Object(g.jsx)(A.a,{children:Object(g.jsx)(h.a.Title,{children:"Content"})})]})})}),n.map((function(e){return Object(g.jsx)(h.a,{className:"mx-5 my-1",children:Object(g.jsx)(h.a.Body,{children:Object(g.jsxs)(E.a,{children:[Object(g.jsx)(A.a,{style:{maxWidth:"10%"},children:Object(g.jsx)(h.a.Text,{children:e.n})}),Object(g.jsx)(A.a,{children:Object(g.jsx)(h.a.Text,{children:e.t})})]})})})}))]})})})]})}function k(){var e=Object(a.useState)(),t=Object(d.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(),r=Object(d.a)(s,2),j=r[0],l=r[1],y=Object(a.useState)(),w=Object(d.a)(y,2),N=w[0],v=w[1];return Object(a.useEffect)((function(){}),[]),Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(b.a,{children:Object(g.jsx)("div",{className:"w-100 d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(g.jsx)(h.a,{className:"h-100 rounded-3",style:{width:"400px",boxShadow:"0px 25px 20px #777"},children:Object(g.jsxs)(h.a.Body,{className:"my-4 px-5",children:[Object(g.jsxs)(x.a,{children:[Object(g.jsx)("h1",{className:"text-center",children:"Reset Password"}),c&&Object(g.jsx)(O.a,{variant:"danger",className:"mt-4",children:c}),N&&Object(g.jsx)(O.a,{variant:"success",className:"mt-4",children:N}),Object(g.jsxs)(u.a,{className:"mt-4",children:[Object(g.jsx)(m.a,{children:"Email Address"}),Object(g.jsx)(p.a,{type:"email",onChange:function(e){l(e.target.value)},required:!0})]}),Object(g.jsx)(f.a,{className:"w-100 mt-1 rounded-3",type:"submit",onClick:function(){n(""),v(""),i.auth().sendPasswordResetEmail(j).catch((function(e){n("Failed to reset password ")})),c||v("Please check your email to reset password")},children:"Reset"})]}),Object(g.jsx)("p",{className:"text-center mt-3",children:Object(g.jsx)(o.b,{to:"/login",children:"Back"})})]})})})})})}var F=function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(o.a,{children:Object(g.jsxs)(l.d,{children:[Object(g.jsx)(l.b,{exact:!0,path:"/",render:function(){return Object(g.jsx)(l.a,{to:"login"})}}),Object(g.jsx)(l.b,{exact:!0,path:"/signup",component:w}),Object(g.jsx)(l.b,{exact:!0,path:"/login",component:y}),Object(g.jsx)(l.b,{exact:!0,path:"/dashboard",component:C}),Object(g.jsx)(l.b,{exact:!0,path:"/record",component:T}),Object(g.jsx)(l.b,{exact:!0,path:"/forgot-password",component:k})]})})})},B=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,90)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),s(e),r(e)}))};r.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(F,{})}),document.getElementById("root")),B()}},[[80,1,2]]]);
//# sourceMappingURL=main.7304eaec.chunk.js.map